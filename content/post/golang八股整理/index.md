---
title: "golang八股整理"
description: 
date: 2025-01-03T23:25:36+08:00
image: 
math: 
license: 
hidden: false
comments: true
draft: true
tags:   
     - go
categories:
     - go
---

## golang八股

### 进程，线程，协程

进程：资源分配和CPU调度的基本单位

线程：CPU调度的基本单位，线程除了一些必备的资源外，本身不携带资源，多个线程依靠于进程的资源

协程：用户态的线程，可以通过用户程序创建，删除



协程退出场景：

```
1.函数执行完毕，正常退出。
2.发生panic且未被recover。
3.调用runtime.Goexit()。
4.通过channel或context发送退出信号。
5.主协程结束导致程序终止。
6.阻塞操作超时或外部触发取消。
```

协程与线程的区别：

```
1.线程是操作系统的概念，而协程是程序级的概念。线程由操作系统调度执行，每个线程都有自己的执行上下文，包
括程序计数器、寄存器等。而协程由程序自身控制。
2.多个线程之间通过切换执行的方式实现并发。线程切换时需要保存和恢复上下文，涉及到上下文切换的开销。而协
程切换时不需要操作系统的介入，只需要保存和恢复自身的上下文，切换开销较小。
3.线程是抢占式的并发，即操作系统可以随时剥夺一个线程的执行权。而协程是合作式的并发，协程的执行权由程序
自身决定，只有当协程主动让出执行权时，其他协程才会得到执行机会。
```

线程的优缺点
```
优点：
1.创建一个新线程的代价要比创建一个新进程小的多
2.线程之间的切换相较于进程之间的切换需要操作系统做的工作很少
3.线程占用的资源要比进程少很多
4.能充分利用多处理器的可并行数量
5.等待慢速 IO操作结束以后，程序可以执行其他的计算任务
缺点：
1.性能损失（ 一个计算密集型线程是很少被外部事件阻塞的，无法和其他线程共享同一个处理器，当计算密集型的	
线程的数量比可用的处理器多，那么就有可能有很大的性能损失，这里的性能损失是指增加了额外的同步和调度开
销，二可用资源不变。）
2.健壮性降低（线程之间是缺乏保护性的。在一个多线程程序里，因为时间上分配的细微差距或者是共享了一些不应
该共享的变量而造成不良影响的可能影响是很大的。）
3.缺乏访问控制（ 因为进程是访问控制的基本粒度，在一个线程中调用某些OS函数会对整个进程造成影响 。）
4.编程难度提高（编写和 调试一个多线程程序比单线程困难的多。）
```

### JWT认证过程

1.客户端发送账号密码等一些登陆信息给服务端
2.服务端验证通过之后，通过上述jwt的字段信息，返回给客户端一个token
3.之后的客户端每次请求都把这个token放到头部
4.服务端需要授权的接口会先拿到token进行解析来检验token并且获取用户的信息

### 第一组

1.二维数组是行优先还是列优先遍历效率高，为什么？

行优先遍历（即按行访问元素）效率更高

2.网络为什么要分层？

网络分层的核心目的是解耦复杂问题，通过模块化设计提高可维护性、扩展性和互操作性，每层只专注于一个功能，不会影响到其它层

3.数据结构哪些是线性的哪些是非线性的，分别用在哪些场景下。

数组：内存连续，支持快速随机访问（时间复杂度O(1)）。
场景：需要频繁按索引查询（如图像像素存储）。
链表：内存不连续，插入/删除高效（O(1)）。
场景：动态数据（如浏览器历史记录）。
栈：后进先出（LIFO）。
场景：函数调用栈、括号匹配。
队列：先进先出（FIFO）。
场景：任务调度、消息队列。

树：层次结构。
场景：文件系统（目录树）、数据库索引（B+树）。
图：网络关系。
场景：社交网络、路径规划（Dijkstra算法）。
哈希表：键值映射。
场景：缓存（Redis）、字典（Python dict）。
堆：完全二叉树，根节点极值。
场景：优先队列（任务调度）、Top K问题。

4.线程池中线程正在执行网络IO,我把线程终止了，这些网络IO会发生什么？（说有难度，比较复杂，考虑多种情况）

情况1：强制终止线程（如pthread_cancel）
阻塞式IO：
线程在系统调用（如read()）中被终止，操作系统会关闭线程打开的文件描述符（FD），但可能不会发送FIN包给对端，导致TCP连接处于异常状态（如CLOSE_WAIT）。
非阻塞IO：
线程可能处于事件循环中，终止会导致未处理的IO事件丢失（如未读取的数据）。
情况2：协作式终止（如设置标志位）
线程在检测到终止标志后，主动关闭连接、释放资源，IO操作可正常终止。



### 第二组

1. make 和 new有什么区别

make只能被用于可引用的类型，像切片等

new是声明一个指向该内存空间的指针

1. defer的执行时机
2. defer 常见的用法
3. panic 怎么处理
4. 协程发生阻塞的情况有哪些？
5. channel满了 消费者和生产者会怎么样。 对值为nil的channel读取会发生什么？
6. map的底层结构是什么样的
7. map是并发安全的吗？ sync.Map
8. map的遍历是有序的还是无需的？ 如果需要实现有序的遍历如何做
9. GMP是什么？介绍一下。M和P的数量是怎么指定的
10. 协程什么情况下会退出
11. 如何实现协程池
12. GC是什么？ 什么时候会发生GC
13. Redis常见数据结构
14. Redis key的删除策略
15. 如果有一大批redis命令 怎么优化
16. redis实现分布式锁
17. MySQL的聚集索引和非聚集索引的区别
18. 如何分析MySQL执行计划
19. MySQL怎么实现乐观锁和悲观锁
